<html>
<head>
  <title>Socket IO Demo</title>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript">
    var sock = null;
    var ts = null;
    var body_loaded = function () {
      sock = new io.Socket(null, {
        port: 80,
        transports: ['websocket', 'flashsocket', 'htmlfile', 'xhr-multipart', 'xhr-polling', 'jsonp-polling']
        // transports: ['websocket', 'flashsocket', 'htmlfile', 'xhr-multipart', 'jsonp-polling']
      });
      sock.on('message', handleMessage);
      sock.connect();
      ts = document.getElementById('timestamp');
    };
    var handleMessage = function (data) {
      var obj = JSON.parse(data);
      ts.textContent = obj.timestamp;
    };
  </script>
</head>
<body onload="body_loaded();">
  <div>
    <h2>Socket IO Demo</h2>
    <label for="timestamp">Timestamp</label>
    <span id="timestamp"></span>
  </div>
</body>
</html>
